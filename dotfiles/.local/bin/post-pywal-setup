#!/usr/bin/env bash

# Only update fileB from fileA if changes occur
update_on_change() {
    # Input files
    local fileA="$1"
    local fileB="$2"

    # Read contents of the files
    local contentA
    local contentB
    contentA=$(<"$fileA")
    contentB=$(<"$fileB")

    # Compare contents and copy if different
    if [ "$contentA" != "$contentB" ]; then
        cp "$fileA" "$fileB"
    fi
}

# Mako
update_on_change ~/.cache/wal/colors-mako ~/.config/mako/config
killall mako

# GTK CSS
update_on_change ~/.cache/wal/gtk-colors.css ~/.config/gtk-3.0/colors.css
update_on_change ~/.cache/wal/gtk-colors.css ~/.config/gtk-4.0/colors.css

# QTCT Settings
update_on_change ~/.cache/wal/qtct-colors.conf ~/.config/qt5ct/colors/pywal16.conf
update_on_change ~/.cache/wal/qtct-colors.conf ~/.config/qt6ct/colors/pywal16.conf
